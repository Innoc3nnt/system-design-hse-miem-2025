## Домашка 2: Интеграции

1. Взять ФТ и НФТ из HW_1
2. Подумать какие сервисы будут и какие интеграции между ними лучше сделать
3. Выбрать способ взаимодействия между сервисами, написать обоснование
4. Сделать верхнеуровневую схему HLD: описать клиента, сервисы, интеграции

### Функциональные требования
- Конфигуратор налогообложения, правил и стандартов
- Пользовательский интерфейс
- Дашборды для отображения:
    - Нагрузки, потерь, аварий
    - Финансовых показателей
- Гибкая система отчётов с поддержкой создания кастомных шаблонов
- Оптимизационный движок для расчёта лучшего баланса throughput/money
- Панель администратора (права, аудит)
- Поддержка мобильных устройств
- Интеграция системы безопасности:
    - Отчётность о попытках проникновения
    - Сигнализация инцидентов безопасности
- Автоматизация развертывания и обновления

### Нефункциональные требования

- Доступность 99.99%, автоматическое масштабирование
- Обработка данных в реальном времени (<1 сек)
- Безопасность:
    - Шифрование данных при передаче и при хранении
    - Соответствие стандартам безопасности (ГОСТ, ISO)
- Поддержка сетей до 1.9 млн клиентов
- Поддержка бесшовных обновлений без даунтайма
- Адаптивный интерфейс
- Локализация: 
	- Русский (по умолчанию)
	- Английский
- Поддержка импортозамещенного ПО (Astra Linux, Aurora OS)

### Основные сервисы

1. **Сервис авторизации и аутентификации (Auth Service)** — управление сессиями, ролями, правами
2. **Сервис управления пользователями и настройками (Config Service)** — конфигурация налогов, стандартов, локалей и прочих настроек конкретного клиента
3. **Сервис мониторинга состояния сети (Grid Monitoring Service)** — сбор данных с устройств в реальном времени, агрегация, первичная фильтрация
4. **Сервис аналитики и оптимизации (Analytics Engine)** — расчёт throughput/cost, ML/AI-модели (если в будущем потребуется)
5. **Сервис отчётности (Report Service)** — генерация, шаблоны, экспорт PDF/Excel
6. **Сервис дашбордов и UI-композиции (Dashboard Service)** — адаптация данных для отображения на клиенте, WebSocket для real-time
7. **Сервис событий безопасности (Security Event Service)** — PenTest-отчёты, уведомления о вторжениях, журнал аудита
8. **Сервис развертывания и обновлений (Deployment & Update Service)** — CI/CD-интеграции, управление контейнерами, агенты на клиентах
9. **Сервис уведомлений (Notification Service)** — email, push, в будущем — SMS, webhooks
10. **API-шлюз / BFF (Backend for Frontend)** — фасад для клиентов: desktop/web/mobile, адаптация REST/GraphQL запросов
### Интеграции
#### Синхронные взаимодействия (обычно REST/gRPC):

- Auth ↔ все остальные — проверка токена, получение прав доступа
- Dashboard ↔ Grid Monitoring / Report / Analytics — по запросу
- Config ↔ Grid Monitoring / Analytics — получение конфигураций для расчётов
- Deployment ↔ все сервисы — управление релизами, обновлениями
- Report ↔ Analytics / Grid Monitoring — генерация отчётов по данным
#### Асинхронные взаимодействия

- Grid Monitoring → Analytics / Dashboard — потоковые данные (real-time)
- Security Event → Dashboard / Notification — события безопасности
- Deployment → Notification — уведомление о статусах обновлений
- Analytics → Report / Dashboard — готовые выводы
- UI (веб/мобильный клиент) ↔ Dashboard — WebSocket для real-time

### Обоснования
- Синхронность хороша, когда нужен моментальный результат (аутентификация, получение конфигурации, ручной запуск отчета)
- Асинхронность обязательна для real-time: телеметрия, оповещения, push в дашборд
- WebSocket используется для UI-пушей (например, авария или изменение нагрузки на подстанции)
- Event-driven архитектура повышает надёжность и масштабируемость: сбой аналитики не влияет на сбор данных
### HLD-схема

![[Editor _ Mermaid Chart-2025-06-20-154403.png]]